(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8d27bc2"],{1205:function(e,t,n){"use strict";(function(e){n("6b54");var i=n("91d2");t["a"]={name:"AlarmOutput",data:function(){return{aMenu:[],oEventInfo:i["a"].oEventInfo,oEventCap:i["a"].oEventCap}},created:function(){var t=this;i["a"].init().finally((function(){t.aMenu=[{title:"",menu:[]}],e.each(t.oEventCap.aAlarmInput,(function(e,n){t.aMenu[0].menu.push({path:"alarmInputSingle",name:"AlarmInputSingle",label:n.text,value:n.value.toString(),cap:!0})}))}))},methods:{goMenu:function(e){var t={};e.name?t.name=e.name:t.path=e.path,this.$router.push(t),this.oEventInfo.szAlarmInputId=e.value}}}}).call(this,n("1157"))},"1c05":function(e,t,n){},"1c83":function(e,t,n){"use strict";(function(e){n("96cf");var i=n("1da1"),a=n("db86"),o=n("1e12"),r=n("962a"),s=n("23d7"),l=n("c050"),c=n("47b5");t["a"]={name:"EventAudioAlarmOut",components:{Upload:o["default"],BasePageExtend:r["a"],TimePlan:s["a"],BaseSelect:c["a"]},data:function(){return{bShowUpload:!1,validate:{},oInputDataValid:a["a"].m_oParamsValid,oParams:a["a"].m_oParams,oParamsUpload:{},aTimes:a["a"].m_aTimes,aTimesTemp:[],oCap:a["a"].m_oCap,bShowSchedule:!1,bEnableCancelCallback:!0,oCustomAudioParam:a["a"].m_oCustomAudioParam}},watch:{"oParams.audioClass":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t>0&&t!==n&&a["a"].isWatchAudioClass&&("alertAudio"!==t||""!==this.oParams.alertAudioID&&this.oParams.alertAudioID||!this.oCap.oAudioTypeNew.aAlertAudioList.length?"customAudio"!==t||""!==this.oParams.customAudioID&&this.oParams.customAudioID||(this.oParams.customAudioID=this.oCap.oAudioTypeNew.szDefCustomAudioId,!this.oParams.customAudioID&&this.oCap.oAudioTypeNew.aCustomAudioList.length&&(this.oParams.customAudioID=this.oCap.oAudioTypeNew.aCustomAudioList[0].value)):this.oParams.alertAudioID=this.oCap.oAudioTypeNew.aAlertAudioList[0].value);case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}},created:function(){a["a"].init()},methods:{testAudio:function(){a["a"].testAudio()},downloadAudio:function(){a["a"].downloadAudio()},uploadAudio:function(){e.extend(!0,this.oParamsUpload,this.oParams),this.bShowUpload=!0},showSchedule:function(){this.aTimesTemp=a["a"].m_aTimes,this.bShowSchedule=!0},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.validate.validateAll(),!l["a"].validateTips(this.validate.getErrorReport())){e.next=6;break}return this.bLazyLoading=!0,e.next=5,a["a"].setParam();case 5:this.bLazyLoading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelcallback:function(){this.aTimes=this.aTimesTemp,this.bShowSchedule=!1},confirm:function(){a["a"].m_aTimes=this.$refs.timePlan.timesData,this.bShowSchedule=!1},cancelUpload:function(){e.extend(!0,this.oParams,this.oParamsUpload),this.bShowUpload=!1},confirmUpload:function(){e.extend(!0,this.oParams,this.oParamsUpload),this.bShowUpload=!1},deleteAll:function(){for(var e=0,t=a["a"].m_aTimes.length;e<t;e++)a["a"].m_aTimes[e]=[];this.$refs.timePlan.timesData=a["a"].m_aTimes,this.$refs.timePlan.$forceUpdate()}}}}).call(this,n("1157"))},"25f1":function(e,t,n){"use strict";n("fa88")},"3ded":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[t("base-header",{attrs:{title:e.$t("networkSettings"),"enable-show-tips":e.bEnableShowTips,"show-confirm":e.bShowConfirm,"enable-cancel-callback":e.bEnableCancelCallback},on:{cancelcallback:e.goConfigPage}}),t("hm-scroll-nav-bar",{attrs:{current:e.selectedLabel,labels:e.tabLabels},on:{change:e.changeHandler}}),t("div",{staticClass:"content-list-wrapper"},[t("router-view")],1)],1)])},a=[],o=n("f220"),r=o["a"],s=(n("c977"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"1bf74791",null);t["default"]=l.exports},5227:function(e,t,n){"use strict";n("f8d8")},5563:function(e,t,n){"use strict";n("7ee9")},5643:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("base-page",{attrs:{title:e.$t("audioAlarmOut"),"b-lazy-loading":e.bLazyLoading,"left-type":"back"}},[t("div",{staticClass:"audioAlarmOut-page-wrapper",attrs:{slot:"content"},slot:"content"},[t("hm-scroll",[t("div",{staticClass:"hm-index-list-item"},[t("hm-validator-group",{attrs:{result:e.validate}},[t("hm-cell-group",{staticClass:"custom-cell-group",attrs:{title:" "}},[t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oCap.oAudioType.bSupport,expression:"oCap.oAudioType.bSupport"}],attrs:{title:e.$t("audioType")}},[t("base-select",{attrs:{title:e.$t("audioType"),options:e.oCap.oAudioType.aList},model:{value:e.oParams.audioID,callback:function(t){e.$set(e.oParams,"audioID",t)},expression:"oParams.audioID"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.oCap.oAudioTypeNew.bSupport,expression:"oCap.oAudioTypeNew.bSupport"}]},[t("hm-cell",{attrs:{title:e.$t("audioAlarmType")}},[t("base-select",{attrs:{title:e.$t("audioAlarmType"),options:e.oCap.oAudioTypeNew.aList},model:{value:e.oParams.audioClass,callback:function(t){e.$set(e.oParams,"audioClass",t)},expression:"oParams.audioClass"}})],1),t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oCap.bSupportAudioTest&&"promptAudio"===e.oParams.audioClass,expression:"oCap.bSupportAudioTest && 'promptAudio' === oParams.audioClass"}]},[t("span",{staticClass:"label-test",on:{click:e.testAudio}},[e._v(e._s(e.$t("test")))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"alertAudio"===e.oParams.audioClass&&e.oCap.oAudioTypeNew.aAlertAudioList.length,expression:"'alertAudio' === oParams.audioClass && oCap.oAudioTypeNew.aAlertAudioList.length"}]},[t("hm-cell",{attrs:{title:e.$t("audioType")}},[t("base-select",{attrs:{title:e.$t("audioType"),options:e.oCap.oAudioTypeNew.aAlertAudioList},model:{value:e.oParams.alertAudioID,callback:function(t){e.$set(e.oParams,"alertAudioID",t)},expression:"oParams.alertAudioID"}})],1),t("hm-cell",{attrs:{"ng-show":"oCap.bSupportAudioTest"}},[t("span",{staticClass:"label-test",on:{click:e.testAudio}},[e._v(" "+e._s(e.$t("test")))])])],1)],1),t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oCap.oAlarmTimes.bSupport,expression:"oCap.oAlarmTimes.bSupport"}],class:{"cell-require":e.oInputDataValid.oAlarmTimes&&e.oInputDataValid.oAlarmTimes.required},attrs:{title:e.$t("alarmNum")}},[t("hm-input",{model:{value:e.oParams.alarmTimes,callback:function(t){e.$set(e.oParams,"alarmTimes",t)},expression:"oParams.alarmTimes"}}),t("hm-validator",{attrs:{model:e.oParams.alarmTimes,rules:e.oInputDataValid.oAlarmTimes,param:e.$t("alarmNum")}})],1),e.oCap.oAdioVolume.bSupport?t("hm-cell",{staticClass:"hm-cell-slider",attrs:{title:e.$t("loudspeaker")}},[t("hm-input",{staticClass:"slider-input",attrs:{disabled:!0,type:"number"},model:{value:e.oParams.audioVolume,callback:function(t){e.$set(e.oParams,"audioVolume",t)},expression:"oParams.audioVolume"}})],1):e._e(),e.oCap.oAdioVolume.bSupport?t("hm-cell",{staticClass:"slider-wrapper-cell"},[t("hm-slider",{staticClass:"slider-wrapper",attrs:{min:e.oCap.oAdioVolume.iMin,max:e.oCap.oAdioVolume.iMax},model:{value:e.oParams.audioVolume,callback:function(t){e.$set(e.oParams,"audioVolume",t)},expression:"oParams.audioVolume"}})],1):e._e(),e.oCap.bSupportSchedule?t("hm-cell",{attrs:{"is-link":"",title:e.$t("armSchedule")},nativeOn:{click:function(t){return e.showSchedule()}}}):e._e()],1)],1)],1),t("div",{staticClass:"hm-btn-group"},[t("hm-button",{on:{click:function(t){return e.save()}}},[e._v("\n          "+e._s(e.$t("save"))+"\n        ")])],1)]),e.bShowSchedule?t("div",{staticClass:"full-screen-display"},[t("base-page-extend",{attrs:{title:e.$t("armSchedule"),"show-footer":!0,"enable-cancel-callback":e.bEnableCancelCallback},on:{delete:e.deleteAll,cancelcallback:e.cancelcallback,confirm:e.confirm}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"swipe-wrapper time-plan-padding swipe-wrapper-show-footer"},[t("hm-scroll",[t("time-plan",{ref:"timePlan",attrs:{"times-data":e.aTimes,holiday:e.oCap.bHoliday}})],1)],1)])])],1):e._e(),e.bShowUpload?t("div",{staticClass:"full-screen-display"},[t("base-page-extend",{attrs:{title:e.$t("customAudioUpload"),"enable-cancel-callback":e.bEnableCancelCallback},on:{cancelcallback:e.cancelUpload,confirm:e.confirmUpload}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"swipe-wrapper swipe-wrapper-show-footer"},[t("upload")],1)])])],1):e._e()],1)])},a=[],o=n("1c83"),r=o["a"],s=(n("e130"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"0df9710a",null);t["default"]=l.exports},5689:function(e,t,n){"use strict";n("d022")},5919:function(e,t,n){"use strict";(function(e){n("2397"),n("a481"),n("ac6a"),n("5df3"),n("6b54"),n("28a5"),n("7514"),n("96cf");var i=n("1da1"),a=n("d4ec"),o=n("bee2"),r=n("262e"),s=n("99de"),l=n("7e84"),c=n("0fe0"),u=n("1f20"),p=n("7de8"),d=n("f193"),h=n("9741"),f=n("181b"),m=n("768a"),v=n("c050"),b=n("d09c"),C=n("8d94"),g=n("9815");function I(e){var t=S();return function(){var n,i=Object(l["a"])(e);if(t){var a=Object(l["a"])(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(s["a"])(this,n)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var E="LineDetection",D=function(t){Object(r["a"])(s,t);var n=I(s);function s(){var e;return Object(a["a"])(this,s),e=n.call(this),e.oEventInfo={bLoading:!1,bEnableEvent:!1,oLink:null,oScheduleTimes:[],bMisinformation:!1,bVehicleMisFilter:!1,iSen:0,szDirect:"",bIpcDtectionTargetHuman:!1,bIpcDtectionTargetVehicle:!1,bIpcDtectionTargetOthers:!1,bSupportAll:!1,iFieldId:0,aFieldList:[],szDect:"all",bPluginHide:!1,szDistanceCfg:"level1"},e.oEventCap={bSupportHoliday:!1,bSupportModify:!1,bChannelSupport:!1,bEnableLocalDetection:!1,bSupportMultiScene:!1,bRegionBtnDisabled:!0,bSupportMisinformation:!1,bSupportVehicleMisFilter:!1,bSupportDetectionTarget:!1,oSupportDetectionTarget:[],bSupportSmartCalibration:!1,iSenMin:0,iSenMax:100,aDirectList:[],bIPCDevice:1===h["a"].iDeviceType,bSupportPTZWithPreview:!1,bDect:!1,bSupportMultiDect:!1,aDectList:[],bSupportConfigByRule:!1,bSupportDistanceCfg:!1,aDistanceTargetArray:{},bSupportMinimumTarget:!1,iDScreenWidth:0,iDScreenHeight:0,oResolution:{width:0,height:0}},e.oParams={oData:null,iChannelId:0,iAlgorithmType:0,iDScreenWidth:0,iDScreenHeight:0,oXhr:{oErrorXhr:null,oSuccessXhr:null,oRestartXhr:null}},e.oFieldInfo={iPointMin:4,iPointMax:4,iFieldSize:0,aFieldCapList:[],iAreaLastIndex:-1,iAreaCurIndex:-1,oFieldCap:{iTimeMin:0,iTimeMax:100,iSenMin:0,iSenMax:100,iPropMin:0,iPropMax:100,id:-1,iTime:0,iSen:0,iProp:0,aPointList:[],aMaxFilterPointList:[],aMinFilterPointList:[]}},e}return Object(o["a"])(s,[{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,n.oParams.iChannelId=t||1,n.oFieldInfo.iAreaLastIndex=-1,n.oFieldInfo.iAreaCurIndex=-1,e.next=6,m["a"].initDeviceParams(this.oEventCap,!0,!0,!0);case 6:return e.next=8,u["a"].getAnalysisUnitSwitch(this.oParams.iChannelId);case 8:return n.oEventCap.bEnableLocalDetection=u["a"].m_oDeviceCapa.bEnableLocalDetection&&0===h["a"].iDeviceType,e.next=11,n.getDetectCap();case 11:return e.next=13,n.getCalibrationsInfo();case 13:return e.next=15,n.getDistanceCap();case 15:return e.abrupt("return",b["a"].getAll([n.getDetectInfo(),n.getDetectLink(),n.getSchedule()]));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDetectCap",value:function(){var t=this;t.oEventCap.bChannelSupport=!0,t.oEventCap.bSupportMultiScene=!1,t.oEventCap.bSupportMisinformation=!1,t.oEventCap.bSupportVehicleMisFilter=!1,t.oEventCap.bSupportDetectionTarget=!1,t.oEventCap.oSupportDetectionTarget.length=0;var n={urlCGI:"smartDetectionCapa",params:{channel:this.oParams.iChannelId,param:E},data:null,loading:!0};return d["a"].get(n).then((function(n){var i=n.oResult;t.oEventCap.bChannelSupport=!0,t.oEventCap.iDScreenWidth=p["a"].nodeValue(i,"normalizedScreenWidth","i"),t.oEventCap.iDScreenHeight=p["a"].nodeValue(i,"normalizedScreenHeight","i"),t.oParams.iDScreenWidth=p["a"].nodeValue(i,"normalizedScreenWidth","i"),t.oParams.iDScreenHeight=p["a"].nodeValue(i,"normalizedScreenHeight","i"),t.oEventCap.bSupportMultiDect=p["a"].nodeValue(i,"isSupportTargetMultiSelect","b"),t.oFieldInfo.iFieldSize=p["a"].nodeAttr(i,"LineItemList","size","i");var a=e(i).find("LineItemList").eq(0),o=null,r=null;t.oFieldInfo.aFieldCapList.length=0,t.oEventInfo.aFieldList.length=0;for(var s=0;s<t.oFieldInfo.iFieldSize;s++){o=a.find("LineItem").eq(s),r={iSenMin:0,iSenMax:100,aDirect:[],id:-1,szDirect:"",iSen:0,aPoint:[],iSX:-1,iSY:-1,iEX:-1,iEY:-1,aMaxFilterPointList:[],aMinFilterPointList:[],aDectList:[],szDect:"all"},r.id=p["a"].nodeValue(o,"id","i"),r.iSenMin=p["a"].nodeAttr(o,"sensitivityLevel","min","i")||r.iSenMin,r.iSenMax=p["a"].nodeAttr(o,"sensitivityLevel","max","i")||r.iSenMax,r.aDirect=o.find("directionSensitivity").eq(0).attr("opt").split(","),r.aDectList.length=0;var l=o.find("detectionTarget"),c=p["a"].nodeAttr(o,"detectionTarget","opt"),u={all:C["a"].t("all"),human:C["a"].t("humanBody"),vehicle:C["a"].t("vehicle")};if(0<l.length&&""!==c)for(var d=c.split(","),h=0;h<d.length;h++)r.aDectList.push({name:u[d[h]],value:d[h],bCheck:!1});t.oFieldInfo.aFieldCapList.push(r),t.oEventInfo.aFieldList.push({text:s+1,value:r.id}),t.oEventCap.oSupportDetectionTarget[s]=o.find("detectionTarget").length>0}t.oEventCap.bSupportMultiScene=p["a"].nodeValue(i,"isSupportMultiScene","b"),t.oEventCap.bSupportMisinformation=p["a"].nodeValue(i,"isSupportHumanMisinfoFilter","b"),t.oEventCap.bSupportVehicleMisFilter=p["a"].nodeValue(i,"isSupportVehicleMisinfoFilter","b"),t.oEventCap.bSupportDetectionTarget=t.oEventCap.oSupportDetectionTarget[0]}),(function(){t.oEventCap.bChannelSupport=!1}))}},{key:"getDetectInfo",value:function(){var t=this,n={urlCGI:"smartDetection",params:{channel:this.oParams.iChannelId,param:E},data:null,loading:!0};return d["a"].get(n).then(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(i){var a,o,r,s,l,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a=i.oResult,t.oParams.oData=a,t.oEventInfo.bEnableEvent=p["a"].nodeValue(a,"enabled","b"),t.oEventInfo.bMisinformation=p["a"].nodeValue(a,"humanMisinfoFilterEnabled","b"),t.oEventInfo.bVehicleMisFilter=p["a"].nodeValue(a,"vehicleMisinfoFilterEnabled","b"),t.oEventCap.bSupportConfigByRule=e(a).find("LineItem").eq(0).find("humanMisinfoFilterEnabled").length>0,t.oEventCap.bDect=0!==e(a).find("detectionTarget").length,t.oEventCap.aDectList=t.oFieldInfo.aFieldCapList[0].aDectList,o=e(a).find("LineItemList").eq(0),r=o.find("LineItem").length,s=null,l=0;l<r;l++)s=o.find("LineItem").eq(l),t.oFieldInfo.aFieldCapList[l].id===p["a"].nodeValue(s,"id","i")&&(t.oFieldInfo.aFieldCapList[l].szDirect=p["a"].nodeValue(s,"directionSensitivity"),t.oFieldInfo.aFieldCapList[l].iSen=p["a"].nodeValue(s,"sensitivityLevel","i"),t.oFieldInfo.aFieldCapList[l].iSX=parseInt(s.find("positionX").eq(0).text(),10),t.oFieldInfo.aFieldCapList[l].iSY=parseInt(s.find("positionY").eq(0).text(),10),t.oFieldInfo.aFieldCapList[l].iEX=parseInt(s.find("positionX").eq(1).text(),10),t.oFieldInfo.aFieldCapList[l].iEY=parseInt(s.find("positionY").eq(1).text(),10),t.oFieldInfo.aFieldCapList[l].szDect=p["a"].nodeValue(s,"detectionTarget"),c=[],p["a"].nodeValue(s,"humanMisinfoFilterEnabled","b")&&c.push("human"),p["a"].nodeValue(s,"vehicleMisinfoFilterEnabled","b")&&c.push("vehicle"),t.oFieldInfo.aFieldCapList[l].aDetectionTarget=c),0===l&&(t.oEventCap.bSupportDetectionTarget&&(u=e(s).find("detectionTarget").text(),t.oEventInfo.bIpcDtectionTargetHuman=u.indexOf("human")>-1,t.oEventInfo.bIpcDtectionTargetVehicle=u.indexOf("vehicle")>-1,t.oEventInfo.bIpcDtectionTargetOthers=u.indexOf("others")>-1,u.indexOf("all")>-1&&(t.oEventInfo.bIpcDtectionTargetHuman=!0,t.oEventInfo.bIpcDtectionTargetVehicle=!0,t.oEventInfo.bIpcDtectionTargetOthers=!0,t.oEventInfo.bSupportAll=!0)),t.oEventCap.bSupportConfigByRule&&(t.oEventInfo.bIpcDtectionTargetHuman=p["a"].nodeValue(s,"humanMisinfoFilterEnabled","b"),t.oEventInfo.bIpcDtectionTargetVehicle=p["a"].nodeValue(s,"vehicleMisinfoFilterEnabled","b")));if(!t.oEventInfo.aFieldList.length){n.next=19;break}if(t.oEventInfo.iFieldId===t.oEventInfo.aFieldList[0].value){n.next=17;break}t.oEventInfo.iFieldId=t.oEventInfo.aFieldList[0].value,n.next=19;break;case 17:return n.next=19,t.changeField(!0);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(){}))}},{key:"getCalibrationsInfo",value:function(){var t=this,n=this;return new Promise((function(i){var a={urlCGI:"smdCalibrations",params:{channel:t.oParams.iChannelId,param:E},data:null,loading:!0};d["a"].get(a).then((function(t){var a=t.oResult;n.oEventCap.bSupportSmartCalibration=!0,e(a).find("SmartCalibration").each((function(t,i){var a=n.oFieldInfo.aFieldCapList[t];a.aMinFilterPointList=n.transRegionPointsFromDevice(e(i).find("MinTargetSize RegionCoordinates")),a.aMaxFilterPointList=n.transRegionPointsFromDevice(e(i).find("MaxTargetSize RegionCoordinates"))})),i()}),(function(){n.oEventCap.bSupportSmartCalibration=!1,i()}))}))}},{key:"changeField",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,o,r,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=this,e.each(a.oFieldInfo.aFieldCapList,(function(e,t){if(t.id===a.oEventInfo.iFieldId)return a.oFieldInfo.iAreaCurIndex=e,!1})),!(a.oFieldInfo.aFieldCapList.length>0&&a.oFieldInfo.iAreaCurIndex>=0)){t.next=29;break}if(!(a.oFieldInfo.iAreaLastIndex>=0)||n){t.next=6;break}return t.next=6,a.savePolygonFromPlugin(a.oFieldInfo.iAreaLastIndex);case 6:if(!a.oEventCap.bSupportMultiScene){t.next=12;break}return o={urlCGI:"lineDetectionItem",params:{channel:this.oParams.iChannelId,id:a.oEventInfo.iFieldId},data:null,loading:!0},t.next=10,d["a"].get(o).then((function(t){var n=t.oResult,i=e(n).find("LineItem").eq(0);if(a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].id===p["a"].nodeValue(i,"id","i")){if(a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].szDirect=p["a"].nodeValue(i,"directionSensitivity"),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSen=p["a"].nodeValue(i,"sensitivityLevel","i"),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSX=parseInt(i.find("positionX").eq(0).text(),10),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSY=parseInt(i.find("positionY").eq(0).text(),10),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iEX=parseInt(i.find("positionX").eq(1).text(),10),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iEY=parseInt(i.find("positionY").eq(1).text(),10),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].szDect=p["a"].nodeValue(i,"detectionTarget"),a.oEventCap.bSupportDetectionTarget){var o=[],r=e(i).find("detectionTarget").text();a.oEventInfo.bIpcDtectionTargetHuman=r.indexOf("human")>-1,a.oEventInfo.bIpcDtectionTargetVehicle=r.indexOf("vehicle")>-1,a.oEventInfo.bIpcDtectionTargetOthers=r.indexOf("others")>-1,a.oEventInfo.bIpcDtectionTargetHuman&&o.push("human"),a.oEventInfo.bIpcDtectionTargetVehicle&&o.push("vehicle"),a.oEventInfo.bIpcDtectionTargetOthers&&o.push("others"),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget=o}if(a.oEventCap.bSupportConfigByRule){var s=[];p["a"].nodeValue(i,"humanMisinfoFilterEnabled","b")&&s.push("human"),p["a"].nodeValue(i,"vehicleMisinfoFilterEnabled","b")&&s.push("vehicle"),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget=s}}}),(function(){a.oEventCap.bSupportMisinformation=!1}));case 10:t.next=22;break;case 12:r=[],s=e(a.oParams.oData).find("detectionTarget").eq(a.oFieldInfo.iAreaCurIndex).text(),a.oEventInfo.bIpcDtectionTargetHuman=s.indexOf("human")>-1,a.oEventInfo.bIpcDtectionTargetVehicle=s.indexOf("vehicle")>-1,a.oEventInfo.bIpcDtectionTargetOthers=s.indexOf("others")>-1,s.indexOf("all")>-1&&(this.oEventInfo.bIpcDtectionTargetHuman=!0,this.oEventInfo.bIpcDtectionTargetVehicle=!0,this.oEventInfo.bIpcDtectionTargetOthers=!0,this.oEventInfo.bSupportAll=!0),a.oEventInfo.bIpcDtectionTargetHuman&&r.push("human"),a.oEventInfo.bIpcDtectionTargetVehicle&&r.push("vehicle"),a.oEventInfo.bIpcDtectionTargetOthers&&r.push("others"),a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget=r;case 22:a.oFieldInfo.iAreaLastIndex=a.oFieldInfo.iAreaCurIndex;try{a.oEventCap.bSupportDetectionTarget=a.oEventCap.oSupportDetectionTarget[a.oFieldInfo.iAreaCurIndex],a.oEventCap.iSenMin=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSenMin,a.oEventCap.iSenMax=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSenMax,a.oEventInfo.iSen=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].iSen,a.oEventInfo.szDect=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].szDect,a.oEventInfo.bIpcDtectionTargetHuman=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget.indexOf("human")>-1,a.oEventInfo.bIpcDtectionTargetVehicle=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget.indexOf("vehicle")>-1,a.oEventInfo.bIpcDtectionTargetOthers=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDetectionTarget.indexOf("others")>-1,l="",c="",a.oEventCap.aDirectList.length=0,e.each(a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].aDirect,(function(e,t){c=t.toString(),"left-right"===c?l="A->B":"right-left"===c?l="B->A":"any"===c&&(l="A<->B"),a.oEventCap.aDirectList.push({text:l,value:c})}))}catch(u){}return a.oEventInfo.szDirect=a.oFieldInfo.aFieldCapList[a.oFieldInfo.iAreaCurIndex].szDirect,a.oEventInfo.bSupportDetectionTarget=a.oEventCap.oSupportDetectionTarget[a.oFieldInfo.iAreaCurIndex],t.next=28,f["a"].clearShapeByType("All");case 28:Promise.all([a.setRegionInfo(),a.setMinFilter(),a.setMaxFilter()]).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f["a"].setDrawStatus(!1);case 1:case"end":return e.stop()}}),e)}))));case 29:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getDetectLink",value:function(){var e=this,t=this;return m["a"].getLinkageCap("LineDetectTriggerCap").then((function(n){t.oEventInfo.oLink=n;var i={urlCGI:"linkInfo",params:{param:"linedetection-"+e.oParams.iChannelId},data:null,loading:!0};d["a"].get(i).then((function(e){var n=e.oResult;m["a"].getLinkInfo(t.oEventInfo.oLink,n)}))}))}},{key:"getSchedule",value:function(){var e=this,t={urlCGI:"scheduleInfo",params:{param:"lineDetections/linedetection_video"+this.oParams.iChannelId},data:null,loading:!0};return d["a"].get(t).then((function(t){var n=t.oResult;m["a"].getSchedule(e.oEventInfo.oScheduleTimes,n)}))}},{key:"changeLineDirect",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!(t.oFieldInfo.aFieldCapList.length>0&&t.oFieldInfo.iAreaCurIndex>=0)){e.next=7;break}return t.oFieldInfo.aFieldCapList[t.oFieldInfo.iAreaCurIndex].szDirect=t.oEventInfo.szDirect,t.oFieldInfo.aFieldCapList[t.oFieldInfo.iAreaCurIndex].iSen=t.oEventInfo.iSen,e.next=6,t.savePolygonFromPlugin(t.oFieldInfo.iAreaCurIndex);case 6:t.oFieldInfo.aFieldCapList[t.oFieldInfo.iAreaCurIndex].iSX>=0&&t.setRegionInfo();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"draw",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!(t.oFieldInfo.iAreaCurIndex>=0&&t.oFieldInfo.aFieldCapList.length>0)){e.next=10;break}return e.next=4,t.savePolygonFromPlugin(t.oFieldInfo.iAreaCurIndex);case 4:n=t.oFieldInfo.aFieldCapList[t.oFieldInfo.iAreaCurIndex],n.iEX=.5*t.oEventCap.iDScreenWidth,n.iEY=.25*t.oEventCap.iDScreenHeight,n.iSX=.5*t.oEventCap.iDScreenWidth,n.iSY=.75*t.oEventCap.iDScreenHeight,t.setRegionInfo();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!(t.oFieldInfo.iAreaCurIndex>=0&&t.oFieldInfo.aFieldCapList.length>0)){e.next=11;break}return n=t.oFieldInfo.aFieldCapList[t.oFieldInfo.iAreaCurIndex],n.iSX=-1,n.iSY=-1,n.iEX=-1,n.iEY=-1,n.aMinFilterPointList.length=0,n.aMaxFilterPointList.length=0,e.next=11,f["a"].clearShapeByType("All");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addMinFilter",value:function(){var e=[[.35,.35],[.4,.35],[.4,.4],[.35,.4]],t=[],n={id:2,editType:0,points:e,closed:!0,tips:"min",drawColor:"#00FF00",translucent:.1,type:1};t.push(n),f["a"].setRectInfo(t)}},{key:"addMaxFilter",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[[.3,.05],[.6,.05],[.3,.95],[.6,.95]],n=[],i={id:3,editType:0,points:t,closed:!0,tips:"max",drawColor:"#00FF00",translucent:.1,type:1},n.push(i),f["a"].setRectInfo(n);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,this.oParams.oXhr={oErrorXhr:null,oSuccessXhr:null,oRestartXhr:null},this.oEventInfo.bLoading=!0,e.next=5,t.setDetectInfo();case 5:if(!t.oEventCap.bSupportSmartCalibration){e.next=8;break}return e.next=8,t.setCalibrationsInfo();case 8:return e.next=10,t.setDetectLink();case 10:return e.next=12,t.setDetectSchedule();case 12:this.oEventInfo.bLoading=!1,t.oParams.oXhr.oErrorXhr?b["a"].saveState(t.oParams.oXhr.oErrorXhr):b["a"].saveState(t.oParams.oXhr.oSuccessXhr);case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDetectInfo",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,a,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this,!(n.oFieldInfo.iAreaCurIndex>=0&&n.oFieldInfo.aFieldCapList.length>0)){t.next=4;break}return t.next=4,n.savePolygonFromPlugin(n.oFieldInfo.iAreaCurIndex);case 4:return i=n.getRegionInfo(),n.oEventCap.bSupportMultiScene&&e(i).find("LineItemList").eq(0).remove(),a={urlCGI:"smartDetection",params:{channel:this.oParams.iChannelId,param:E},data:i,loading:!0},t.abrupt("return",d["a"].put(a).then((function(e){if(n.oEventCap.bSupportMultiScene)return n.setFieldDetectionRegion();o.oParams.oXhr.oSuccessXhr=e.xhr}),(function(e){o.oParams.oXhr.oErrorXhr=e,b["a"].saveState(e)})));case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"setCalibrationsInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,o,r,s,l,c,u,h,f,m,g,I=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.oFieldInfo.aFieldCapList,n=[],i=[],a="<?xml version='1.0' encoding='UTF-8'?>",a+="<SmartCalibrationList>",o=0,r=t.length;case 6:if(!(o<r)){e.next=30;break}if(n=t[o].aMinFilterPointList,i=t[o].aMaxFilterPointList,!n.length||!i.length){e.next=20;break}if(s=Math.abs(n[0].iX-n[2].iX),l=Math.abs(n[0].iY-n[2].iY),c=Math.abs(i[0].iX-i[2].iX),u=Math.abs(i[0].iY-i[2].iY),h="",0===s||0===c){e.next=20;break}if(s>=c?h=p["a"].replaceAll(C["a"].t("sizeLessthan"),"%s",C["a"].t("width")):l>=u&&(h=p["a"].replaceAll(C["a"].t("sizeLessthan"),"%s",C["a"].t("height"))),!h){e.next=20;break}return v["a"].tip(h),e.abrupt("return",new Promise((function(e,t){t()})));case 20:if(a+="<SmartCalibration>",a+="<ID>"+(o+1)+"</ID>",a+="<FilterSize><MinTargetSize><RegionCoordinatesList>",n.length)for(f=0;f<n.length;f++)a+="<RegionCoordinates><positionX>"+n[f].iX+"</positionX>",a+="<positionY>"+n[f].iY+"</positionY></RegionCoordinates>";else a+="<RegionCoordinates><positionX>0</positionX><positionY>0</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>0</positionX><positionY>0</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>0</positionX><positionY>0</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>0</positionX><positionY>0</positionY></RegionCoordinates>";if(a+="</RegionCoordinatesList></MinTargetSize><MaxTargetSize><RegionCoordinatesList>",i.length)for(m=0;m<i.length;m++)a+="<RegionCoordinates><positionX>"+i[m].iX+"</positionX>",a+="<positionY>"+i[m].iY+"</positionY></RegionCoordinates>";else a+="<RegionCoordinates><positionX>0</positionX><positionY>0</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>"+this.oEventCap.iDScreenWidth+"</positionX><positionY>0</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>"+this.oEventCap.iDScreenWidth+"</positionX><positionY>"+this.oEventCap.iDScreenHeight+"</positionY></RegionCoordinates>",a+="<RegionCoordinates><positionX>0</positionX><positionY>"+this.oEventCap.iDScreenHeight+"</positionY></RegionCoordinates>";a+="</RegionCoordinatesList></MaxTargetSize></FilterSize></SmartCalibration>";case 27:++o,e.next=6;break;case 30:return a+="</SmartCalibrationList>",g={urlCGI:"smdCalibrations",params:{channel:this.oParams.iChannelId,param:E},data:a,loading:!0},e.abrupt("return",d["a"].put(g).then((function(e){I.oParams.oXhr.oSuccessXhr=e.xhr}),(function(e){I.oParams.oXhr.oErrorXhr=e,b["a"].saveState(e)})));case 33:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setDetectLink",value:function(){var e=this,t=this,n=m["a"].setLinkInfo(t.oEventInfo.oLink,"linedetection",t.oParams.iChannelId),i={urlCGI:"linkInfo",params:{param:"linedetection-"+t.oParams.iChannelId},data:n,loading:!0};return d["a"].put(i).then((function(t){e.oParams.oXhr.oSuccessXhr=t.xhr}),(function(t){e.oParams.oXhr.oErrorXhr=t,b["a"].saveState(t)}))}},{key:"setDetectSchedule",value:function(){var e=this,t=this,n=m["a"].setSchedule(t.oEventInfo.oScheduleTimes,"linedetection",t.oParams.iChannelId),i={urlCGI:"scheduleInfo",params:{param:"lineDetections/linedetection_video"+t.oParams.iChannelId},data:n,loading:!0};return d["a"].put(i).then((function(t){e.oParams.oXhr.oSuccessXhr=t.xhr}),(function(t){e.oParams.oXhr.oErrorXhr=t,b["a"].saveState(t)}))}},{key:"setRegionInfo",value:function(){var e=this,t=e.oFieldInfo.iAreaCurIndex,n=e.oFieldInfo.aFieldCapList[t],i=n.szDirect;if(i){var a=0;"left-right"===i?a=0:"right-left"===i?a=1:"any"===i&&(a=2);var o=n.iSX/e.oEventCap.iDScreenWidth,r=1-n.iSY/e.oEventCap.iDScreenHeight,s=n.iEX/e.oEventCap.iDScreenWidth,l=1-n.iEY/e.oEventCap.iDScreenHeight,c=[];if(e.checkLine(n)){var u={id:n.id,editType:0,lineType:3,tips:"#"+n.id,points:[[o,r],[s,l]],direction:a,drawColor:"#FFFF00",mode:e.oParams.iAlgorithmType};c.push(u)}return f["a"].setLineInfo(c)}}},{key:"setMinFilter",value:function(){var e=this,t=e.oFieldInfo.aFieldCapList[e.oFieldInfo.iAreaCurIndex].aMinFilterPointList;if(e.checkPoints(t)){var n=[],i={id:2,editType:0,points:e.transRegionPointsToPlugin(t),closed:!0,tips:"min",drawColor:"#00FF00",translucent:.1,type:1};return n.push(i),f["a"].setRectInfo(n)}}},{key:"setMaxFilter",value:function(){var e=this,t=e.oFieldInfo.aFieldCapList[e.oFieldInfo.iAreaCurIndex].aMaxFilterPointList;if(e.checkPoints(t)){var n=[],i={id:3,editType:0,points:e.transRegionPointsToPlugin(t),closed:!0,tips:"max",drawColor:"#00FF00",translucent:.1,type:1};return n.push(i),f["a"].setRectInfo(n)}}},{key:"getRegionInfo",value:function(){for(var t=this,n=t.oParams.oData,i="",a=[],o=0;o<e(n).find("detectionTarget").length;o++)a[o]=e(n).find("detectionTarget").eq(o).text();if(e(n).find("enabled").eq(0).text(t.oEventInfo.bEnableEvent.toString()),e(n).find("LineDetection > humanMisinfoFilterEnabled").eq(0).text(t.oEventInfo.bMisinformation.toString()),e(n).find("LineDetection > vehicleMisinfoFilterEnabled").eq(0).text(t.oEventInfo.bVehicleMisFilter.toString()),t.oFieldInfo.iAreaCurIndex>=0&&t.oFieldInfo.aFieldCapList.length>0)for(var r=0;r<t.oFieldInfo.aFieldCapList.length;r++){if(e(n).find("LineItem").eq(r).find("sensitivityLevel").eq(0).text(t.oFieldInfo.aFieldCapList[r].iSen),e(n).find("LineItem").eq(r).find("directionSensitivity").eq(0).text(t.oFieldInfo.aFieldCapList[r].szDirect),t.oEventCap.bDect&&e(n).find("LineItem").eq(r).find("detectionTarget").eq(0).text(t.getDectString(t.oFieldInfo.aFieldCapList[r])),e(n).find("LineItem").eq(r).find("CoordinatesList").remove(),t.checkLine(t.oFieldInfo.aFieldCapList[r])?(i="<?xml version='1.0' encoding='UTF-8'?><TmpLineList><CoordinatesList><Coordinates><positionX>"+parseInt(t.oFieldInfo.aFieldCapList[r].iSX,10),i+="</positionX><positionY>"+parseInt(t.oFieldInfo.aFieldCapList[r].iSY,10)+"</positionY></Coordinates>",i+="<Coordinates><positionX>"+parseInt(t.oFieldInfo.aFieldCapList[r].iEX,10)+"</positionX><positionY>"+parseInt(t.oFieldInfo.aFieldCapList[r].iEY,10)+"</positionY></Coordinates></CoordinatesList></TmpLineList>"):i="<?xml version='1.0' encoding='UTF-8'?><TmpLineList><CoordinatesList><Coordinates><positionX>0</positionX><positionY>0</positionY></Coordinates><Coordinates><positionX>0</positionX><positionY>0</positionY></Coordinates></CoordinatesList></TmpLineList>",e(n).find("LineItem").eq(r).append(e(p["a"].parseXmlFromStr(i)).find("TmpLineList").eq(0).clone().children()),t.oEventCap.bSupportDetectionTarget&&!t.oEventCap.bEnableLocalDetection&&t.oEventCap.bSupportDetectionTarget){var s=[];t.oEventInfo.bIpcDtectionTargetHuman&&s.push("human"),t.oEventInfo.bIpcDtectionTargetVehicle&&s.push("vehicle"),t.oEventInfo.bIpcDtectionTargetOthers&&s.push("others"),!t.oEventInfo.bIpcDtectionTargetHuman&&!t.oEventInfo.bIpcDtectionTargetVehicle&&!t.oEventInfo.bIpcDtectionTargetOthers&&s.push("all"),e(n).find("LineItem").eq(r).find("detectionTarget").eq(0).text(s.join(","))}t.oEventCap.bSupportConfigByRule&&(e(n).find("LineItem").eq(r).find("humanMisinfoFilterEnabled").eq(0).text(t.oFieldInfo.aFieldCapList[r].aDetectionTarget.indexOf("human")>-1),e(n).find("LineItem").eq(r).find("vehicleMisinfoFilterEnabled").eq(0).text(t.oFieldInfo.aFieldCapList[r].aDetectionTarget.indexOf("vehicle")>-1))}else{if(t.oEventCap.bSupportDetectionTarget){var l=[];t.oEventInfo.bIpcDtectionTargetHuman&&l.push("human"),t.oEventInfo.bIpcDtectionTargetVehicle&&l.push("vehicle"),!t.oEventInfo.bIpcDtectionTargetHuman&&!t.oEventInfo.bIpcDtectionTargetVehicle&&l.push("all"),e(n).find("LineItem").eq(0).find("detectionTarget").remove();var c="<?xml version='1.0' encoding='UTF-8'?><TmpDetectionTarget><detectionTarget>"+l.join(",")+"</detectionTarget></TmpDetectionTarget>",u=e(p["a"].parseXmlFromStr(c)).find("TmpDetectionTarget").eq(0).clone().children();e(n).find("LineItem").eq(0).append(u)}if(t.oEventCap.bSupportConfigByRule){var d="<?xml version='1.0' encoding='UTF-8'?><TmpDetectionTarget><humanMisinfoFilterEnabled>"+t.oEventInfo.bIpcDtectionTargetHuman+"</humanMisinfoFilterEnabled><vehicleMisinfoFilterEnabled>"+t.oEventInfo.bIpcDtectionTargetVehicle+"</vehicleMisinfoFilterEnabled></TmpDetectionTarget>",h=e(p["a"].parseXmlFromStr(d)).find("TmpDetectionTarget").eq(0).clone().children();e(n).find("LineItem").eq(0).append(h)}}return n}},{key:"setFieldDetectionRegion",value:function(){var e=this,t=this,n=t.oFieldInfo.iAreaCurIndex,i=t.oFieldInfo.aFieldCapList,a="<?xml version='1.0' encoding='UTF-8'?><LineItem>";a+="<id>"+t.oEventInfo.iFieldId+"</id>",t.checkLine(i[n])?(a+="<enabled>true</enabled>",a+="<CoordinatesList>",a+="<Coordinates><positionX>"+Math.floor(i[n].iSX)+"</positionX><positionY>"+Math.floor(i[n].iSY)+"</positionY></Coordinates>",a+="<Coordinates><positionX>"+Math.floor(i[n].iEX)+"</positionX><positionY>"+Math.floor(i[n].iEY)+"</positionY></Coordinates>",a+="</CoordinatesList>"):(a+="<enabled>false</enabled>",a+="<CoordinatesList>",a+="<Coordinates><positionX>0</positionX><positionY>0</positionY></Coordinates>",a+="<Coordinates><positionX>0</positionX><positionY>0</positionY></Coordinates>",a+="</CoordinatesList>"),i[n].iSen=t.oEventInfo.iSen,i[n].szDirect=t.oEventInfo.szDirect,a+="<sensitivityLevel>"+i[n].iSen+"</sensitivityLevel>",a+="<directionSensitivity>"+i[n].szDirect+"</directionSensitivity>",t.oEventCap.bDect&&(a+="<detectionTarget>"+t.getDectString(i[n])+"</detectionTarget>"),a+="</LineItem>";var o=p["a"].parseXmlFromStr(a),r={urlCGI:"lineDetectionItem",params:{channel:t.oParams.iChannelId,id:t.oEventInfo.iFieldId},data:o,loading:!0};return d["a"].put(r).then((function(t){e.oParams.oXhr.oSuccessXhr=t.xhr}),(function(t){e.oParams.oXhr.oErrorXhr=t}))}},{key:"savePolygonFromPlugin",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var i,a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,t.next=3,f["a"].getLineInfo();case 3:if(a=t.sent,a){t.next=6;break}return t.abrupt("return");case 6:return i.oFieldInfo.aFieldCapList[n].iSen=i.oEventInfo.iSen,i.oFieldInfo.aFieldCapList[n].szDirect=i.oEventInfo.szDirect,i.oFieldInfo.aFieldCapList[n].szDect=i.oEventInfo.szDect,o=[],i.oEventInfo.bIpcDtectionTargetHuman&&o.push("human"),i.oEventInfo.bIpcDtectionTargetVehicle&&o.push("vehicle"),i.oFieldInfo.aFieldCapList[n].aDetectionTarget=o,a.length>0&&a[0].points&&(i.oFieldInfo.aFieldCapList[n].iSX=a[0].points[0][0]*i.oEventCap.iDScreenWidth,i.oFieldInfo.aFieldCapList[n].iSY=(1-a[0].points[0][1])*i.oEventCap.iDScreenHeight,i.oFieldInfo.aFieldCapList[n].iEX=a[0].points[1][0]*i.oEventCap.iDScreenWidth,i.oFieldInfo.aFieldCapList[n].iEY=(1-a[0].points[1][1])*i.oEventCap.iDScreenHeight),t.next=16,f["a"].getRectInfo();case 16:r=t.sent,e.each(r,(function(e,t){if(3===t.id){var a=i.oFieldInfo.aFieldCapList[n].aMaxFilterPointList;a.length=0,i.transRegionPointsFromPlugin(a,[t])}else if(2===t.id){var o=i.oFieldInfo.aFieldCapList[n].aMinFilterPointList;o.length=0,i.transRegionPointsFromPlugin(o,[t])}}));case 18:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getDectString",value:function(e){var t="";if(this.oEventCap.bIPCDevice&&this.oEventCap.bSupportMultiDect||!this.oEventCap.bIPCDevice&&!this.oEventCap.bEnableLocalDetection&&this.oEventCap.bSupportDetectionTarget){var n=[];this.oEventInfo.bIpcDtectionTargetHuman&&n.push("human"),this.oEventInfo.bIpcDtectionTargetVehicle&&n.push("vehicle"),this.oEventInfo.bIpcDtectionTargetOthers&&n.push("others"),this.oEventInfo.bSupportAll&&n.push("all"),t=n.join(",")}else t=e.szDect;return t}},{key:"checkLine",value:function(e){return!!e.szDirect&&(!(e.iSX<0||e.iSY<0||e.iEX<0||e.iEY<0||e.iSX===e.iEX&&e.iSY===e.iEY)&&!(isNaN(e.iSX)||isNaN(e.iSY)||isNaN(e.iEX)||isNaN(e.iEY)))}},{key:"getChannelMainResolution",value:function(){var t=this;return new Promise((function(n){var i={urlCGI:"videoInfo",params:{channel:t.oParams.iChannelId,videoStream:"01"},loading:!0};return d["a"].get(i).then((function(i){var a=i.oResult,o=parseInt(e(a).find("videoResolutionWidth").text(),10),r=parseInt(e(a).find("videoResolutionHeight").text(),10);t.oEventCap.oResolution["width"]=o,t.oEventCap.oResolution["height"]=r,n()}),(function(){n()}))}))}},{key:"getDistanceCap",value:function(){var t=this;return this.oEventCap.bSupportDistanceCfg=!1,new Promise((function(n){var i={urlCGI:"distanceCap",params:{channel:t.oParams.iChannelId},loading:!0};return d["a"].get(i).then((function(i){var a=i.oResult;t.oEventCap.bSupportDistanceCfg=!0,a&&a.DetectionDistance&&e.each(a.DetectionDistance.minTargetPixel["@opt"],(function(e,n){t.oEventCap.aDistanceTargetArray["level"+(e+1)]=n.split("*")})),t.getChannelMainResolution(),t.getDistanceCfg(),n()}),(function(){t.oEventCap.bSupportDistanceCfg=!1,n()}))}))}},{key:"getDistanceCfg",value:function(){var e=this,t=this;return new Promise((function(n){var i={urlCGI:"distanceCfg",params:{channel:t.oParams.iChannelId},loading:!0};return d["a"].get(i).then((function(i){var a=i.oResult;a&&a.DetectionDistance&&(e.oEventInfo.szDistanceCfg=a.DetectionDistance.distance),setTimeout((function(){t.addMinimumTarget()})),n()}),(function(){n()}))}))}},{key:"addMinimumTarget",value:function(){if(this.oEventCap.bSupportDistanceCfg&&this.oEventCap.bEnableLocalDetection)if(this.oEventCap.oResolution["width"]&&this.oEventCap.oResolution["height"]){var e=this.oEventCap.aDistanceTargetArray[this.oEventInfo.szDistanceCfg][0]/1920*this.oEventCap.iDScreenWidth/(this.oEventCap.oResolution["width"]||1920),t=this.oEventCap.aDistanceTargetArray[this.oEventInfo.szDistanceCfg][1]/1080*this.oEventCap.iDScreenHeight/(this.oEventCap.oResolution["height"]||1080),n=[{iX:.05,iY:t+.05},{iX:e+.05,iY:t+.05},{iX:e+.05,iY:.05},{iX:.05,iY:.05}];if(this.checkPoints(n)){var i=this.getRegionPointsXmlForPlugin(n,!1),a=g["a"].getDrawRectStr(4,"",1).replace("<pointList/>",i);g["a"].addPolygon(null,null,a,!1)}}else this.oEventCap.bSupportMinimumTarget=!1}},{key:"getRegionPointsXmlForPlugin",value:function(t,n){void 0===n&&(n=!0);var i="<pointList>";return e.each(t,(function(){n?(i+="<point><x>"+this.iX/this.oEventCap.iDScreenWidth+"</x>",i+="<y>"+(1-this.iY/this.oEventCap.iDScreenHeight)+"</y></point>"):(i+="<point><x>"+this.iX+"</x>",i+="<y>"+this.iY+"</y></point>")})),i+="</pointList>",i}},{key:"checkPoints",value:function(t){var n=!0,i=0;return e.each(t,(function(){if(this.iX<0||this.iY<0)return n=!1,!1;i+=this.iX+this.iY})),i<=0&&(n=!1),n}},{key:"setDrawStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].setDrawStatus(t);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateRegionInfo",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!(t.oFieldInfo.iAreaCurIndex>=0&&t.oFieldInfo.aFieldCapList.length>0)){e.next=4;break}return e.next=4,t.savePolygonFromPlugin(t.oFieldInfo.iAreaCurIndex);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),s}(c["a"]);t["a"]=new D}).call(this,n("1157"))},"60a0":function(e,t,n){},"7ee9":function(e,t,n){},"8d68":function(e,t,n){},9195:function(e,t,n){"use strict";(function(e){n("b54a"),n("c5f6"),n("96cf");var i=n("1da1"),a=(n("ac6a"),n("6458")),o=n("1c1a"),r=n("962a"),s=n("2b88"),l=n("23d7"),c=n("5919"),u=n("1f20"),p=n("3616"),d=n("b77f"),h=n("47b5");t["a"]={name:"SmartLineDetection",components:{BaseView:o["a"],BasePageExtend:r["a"],PluginWind:s["a"],TimePlan:l["a"],ChannelList:a["a"],NewBasePageExtendRotate:p["a"],BaseLink:d["a"],BaseSelect:h["a"]},data:function(){return{bEnableCancelCallback:!0,bSupportChannelCap:!1,bShowAreaSet:!1,bShowSchedule:!1,bShowArmSchedule:!1,bShowLink:!1,bShowTypes:!1,bLandscapeMode:!1,szDrawMode:"drawWarnLine",oChannel:{id:1},oEventCap:c["a"].oEventCap,oEventInfo:c["a"].oEventInfo,oTempEventInfo:{}}},computed:{bSupportDtectionTargetOthers:function(){var e=!1;return this.oEventCap.aDectList.forEach((function(t){if("others"===t.value)return e=!0,!0})),e},bLazyLoading:function(){return c["a"].oEventInfo.bLoading}},watch:{$route:function(e,t){var n=this,i=-1;e.name!==t.name?(i=this.$route.query.channelID,c["a"].init(i).finally((function(){n.oEventCap=c["a"].oEventCap,n.oEventInfo=c["a"].oEventInfo})),this.oChannel.id=i):e.query.channelID!==t.query.channelID&&(i=this.$route.query.channelID,this.oChannel.id=i)},"oChannel.id":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t>-1&&t!==n&&c["a"].init(t).finally((function(){i.oEventCap=c["a"].oEventCap,i.oEventInfo=c["a"].oEventInfo,i.initLink()}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),immediate:!0,deep:!0},"oEventInfo.iFieldId":{handler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=3;break}return e.next=3,c["a"].changeField();case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deep:!0}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getDeviceCapa().then(Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.$route.query&&t.$route.query.channelID,t.oChannel={id:Number(n)||1},t.bSupportChannelCap=u["a"].m_oDeviceCapa.bSupportChannelEventCap;case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),methods:{enterFullScreen:function(){var t=this;this.bLandscapeMode=!0,this.$nextTick((function(){var n=t.$store.state.globeStore.screenWidth?t.$store.state.globeStore.screenWidth:window.screen.height;e("#main_plugin").height(window.screen.width),e("#main_plugin").width(n)}))},drawPolygon:function(){this.szDrawMode="drawWarnLine",c["a"].draw()},addMinFilter:function(){this.szDrawMode="addMinFilter",c["a"].addMinFilter()},addMaxFilter:function(){this.szDrawMode="addMaxFilter",c["a"].addMaxFilter()},initLink:function(){var t=this;this.bShowLink=!1,e.extend(!0,this.oTempEventInfo,this.oEventInfo),this.bShowLink=!0,this.$nextTick((function(){t.$refs.link.linkData=t.oEventInfo.oLink,t.$refs.link.$forceUpdate()}))},save:function(){c["a"].save()},confirmArmSchedule:function(){this.oEventInfo.oScheduleTimes=this.$refs.timePlan.timesData,this.bShowSchedule=!1},deleteAll:function(){for(var e=0,t=this.oEventInfo.oScheduleTimes.length;e<t;e++)this.oEventInfo.oScheduleTimes[e]=[];this.$refs.timePlan.timesData=this.oEventInfo.oScheduleTimes,this.$refs.timePlan.$forceUpdate()},confirmAreaSet:function(){this.bShowAreaSet=!1},confirmLandscapeMode:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.bLandscapeMode=!1,this.szDrawMode="",e.next=4,c["a"].updateRegionInfo();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),cancelLandscapeMode:function(){this.bLandscapeMode=!1,this.bShowAreaSet=!0},confirmLink:function(){this.bShowLink=!1},cancelCallbackArmSchedule:function(){e.extend(!0,this.oEventInfo,this.oTempEventInfo),this.bShowSchedule=!1},cancelCallbackAreaSet:function(){e.extend(!0,this.oEventInfo,this.oTempEventInfo),this.bShowAreaSet=!1},cancelCallbackLink:function(){e.extend(!0,this.oEventInfo,this.oTempEventInfo),this.bShowLink=!1},showAreaSet:function(){this.bShowAreaSet=!0,e.extend(!0,this.oTempEventInfo,this.oEventInfo),c["a"].setDrawStatus(!1)},showArmSchedule:function(){e.extend(!0,this.oTempEventInfo,this.oEventInfo),this.bShowSchedule=!0},showLink:function(){var t=this;e.extend(!0,this.oTempEventInfo,this.oEventInfo),this.bShowLink=!0,this.$nextTick((function(){t.$refs.link.linkData=t.oEventInfo.oLink,t.$refs.link.$forceUpdate()}))},changeWarnLine:function(){c["a"].changeLineDirect()},changeLineDirect:function(){c["a"].changeLineDirect()},switchMultiDect:function(){var e=this;if(!this.switchMultiDectPicker){var t=[];this.oEventCap.aDectList.forEach((function(e){""!==e&&t.push({mode:e.value,name:e.name})})),this.switchMultiDectPicker=this.$createPicker({title:this.$t("detectionTarget"),data:[t],alias:{value:"mode",text:"name"},onSelect:function(t){e.oEventInfo.szDect=t[0]},onCancel:function(){}})}this.switchMultiDectPicker.show()},draw:function(){var t=this;this.bShowAreaSet=!1,this.bLandscapeMode=!0,this.szDrawMode="drawWarnLine",this.$nextTick((function(){var n=t.$store.state.globeStore.screenWidth?t.$store.state.globeStore.screenWidth:window.screen.height;e("#main_plugin").height(window.screen.width-88),e("#main_plugin").width(n)}))},clear:function(){c["a"].clear()},playSuccess:function(){var e=this;this.$nextTick(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.bLandscapeMode){t.next=6;break}"drawWarnLine"===e.szDrawMode?c["a"].draw():c["a"].setRegionInfo(),"addMaxFilter"===e.szDrawMode?c["a"].addMaxFilter():c["a"].setMaxFilter(),"addMinFilter"===e.szDrawMode?c["a"].addMinFilter():c["a"].setMinFilter(),t.next=11;break;case 6:return c["a"].setRegionInfo(),c["a"].setMinFilter(),c["a"].setMaxFilter(),t.next=11,c["a"].setDrawStatus(!1);case 11:case"end":return t.stop()}}),t)}))))},clearPolygon:function(){this.szDrawMode="",c["a"].clear()}}}}).call(this,n("1157"))},"9a26":function(e,t,n){"use strict";n("cbd9")},"9f2e":function(e,t,n){},affe:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("base-page",{attrs:{title:e.$t("lineCrossDetect"),"right-type":"text","show-save-button":!e.bShowSchedule,"b-lazy-loading":e.bLazyLoading,"save-text":e.$t("save")},on:{"save-handle":e.save}},[t("div",{staticClass:"line-content",attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"hm-index-list-item"},[e.bSupportChannelCap||e.oEventCap.bIPCDevice?e._e():t("channel-list",{attrs:{"o-channel":e.oChannel}}),t("div",{staticClass:"plugin-small"},[e.bLandscapeMode?e._e():t("plugin-wind",{attrs:{mode:"motiondetect","o-channel":e.oChannel,hide:e.oEventInfo.bPluginHide},on:{"play-success":e.playSuccess}})],1),t("hm-cell-group",{staticClass:"custom-cell-group",attrs:{title:" "}},[t("hm-cell",{attrs:{title:e.$t("enable")}},[t("hm-switch",{model:{value:e.oEventInfo.bEnableEvent,callback:function(t){e.$set(e.oEventInfo,"bEnableEvent",t)},expression:"oEventInfo.bEnableEvent"}})],1),t("hm-cell",{nativeOn:{click:function(t){return e.enterFullScreen.apply(null,arguments)}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"blue-button"},[e._v(e._s(e.$t("drawRules")))])])])],1),t("hm-cell-group",{staticClass:"custom-cell-group",attrs:{title:e.$t("ruleConf")}},[t("hm-cell",{attrs:{title:e.$t("warnLine")}},[t("base-select",{attrs:{title:e.$t("warnLine"),options:e.oEventInfo.aFieldList},on:{change:function(t){return e.changeWarnLine()}},model:{value:e.oEventInfo.iFieldId,callback:function(t){e.$set(e.oEventInfo,"iFieldId",t)},expression:"oEventInfo.iFieldId"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.oEventCap.bIPCDevice&&e.oEventCap.bSupportMultiDect&&e.oEventCap.bDect||!e.oEventCap.bIPCDevice&&(e.oEventCap.bSupportConfigByRule||e.oEventCap.bSupportDetectionTarget),expression:"(oEventCap.bIPCDevice && oEventCap.bSupportMultiDect && oEventCap.bDect) || (!oEventCap.bIPCDevice && (oEventCap.bSupportConfigByRule || oEventCap.bSupportDetectionTarget))"}]},[t("hm-cell",{attrs:{title:e.$t("detectionTarget")}}),t("hm-cell",{attrs:{title:e.$t("human")}},[t("hm-switch",{model:{value:e.oEventInfo.bIpcDtectionTargetHuman,callback:function(t){e.$set(e.oEventInfo,"bIpcDtectionTargetHuman",t)},expression:"oEventInfo.bIpcDtectionTargetHuman"}})],1),t("hm-cell",{attrs:{title:e.$t("vehicle")}},[t("hm-switch",{model:{value:e.oEventInfo.bIpcDtectionTargetVehicle,callback:function(t){e.$set(e.oEventInfo,"bIpcDtectionTargetVehicle",t)},expression:"oEventInfo.bIpcDtectionTargetVehicle"}})],1),e.bSupportDtectionTargetOthers?t("hm-cell",{attrs:{title:e.$t("other")}},[t("hm-switch",{model:{value:e.oEventInfo.bIpcDtectionTargetOthers,callback:function(t){e.$set(e.oEventInfo,"bIpcDtectionTargetOthers",t)},expression:"oEventInfo.bIpcDtectionTargetOthers"}})],1):e._e()],1),t("hm-cell",{attrs:{title:e.$t("direction")}},[t("base-select",{attrs:{title:e.$t("direction"),options:e.oEventCap.aDirectList},on:{change:function(t){return e.changeLineDirect()}},model:{value:e.oEventInfo.szDirect,callback:function(t){e.$set(e.oEventInfo,"szDirect",t)},expression:"oEventInfo.szDirect"}})],1),t("base-slider-content",{attrs:{title:e.$t("sensitivity")+":"+e.oEventInfo.iSen},scopedSlots:e._u([{key:"content",fn:function(){return[t("mt-range",{attrs:{min:e.oEventCap.iSenMin,max:e.oEventCap.iSenMax,step:1,"bar-height":5},model:{value:e.oEventInfo.iSen,callback:function(t){e.$set(e.oEventInfo,"iSen",t)},expression:"oEventInfo.iSen"}})]},proxy:!0}])}),t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oEventCap.bIPCDevice&&e.oEventCap.bDect&&!e.oEventCap.bSupportMultiDect,expression:"oEventCap.bIPCDevice && oEventCap.bDect && !oEventCap.bSupportMultiDect"}],attrs:{title:e.$t("detectionTarget"),value:e.oEventInfo.szDect},nativeOn:{click:function(t){return e.switchMultiDect()}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.oEventCap.bSupportDetectionTarget&&(e.oEventCap.bSupportMisinformation||e.oEventCap.bSupportVehicleMisFilter)&&!e.oEventCap.bSupportConfigByRule,expression:"!oEventCap.bSupportDetectionTarget && (oEventCap.bSupportMisinformation || oEventCap.bSupportVehicleMisFilter)&& !oEventCap.bSupportConfigByRule"}]},[t("hm-cell",{attrs:{title:e.$t("detectionTarget")}}),t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oEventCap.bSupportMisinformation,expression:"oEventCap.bSupportMisinformation"}],attrs:{title:e.$t("human")}},[t("hm-switch",{model:{value:e.oEventInfo.bMisinformation,callback:function(t){e.$set(e.oEventInfo,"bMisinformation",t)},expression:"oEventInfo.bMisinformation"}})],1),t("hm-cell",{directives:[{name:"show",rawName:"v-show",value:e.oEventCap.bSupportVehicleMisFilter,expression:"oEventCap.bSupportVehicleMisFilter"}],attrs:{title:e.$t("vehicle")}},[t("hm-switch",{model:{value:e.oEventInfo.bVehicleMisFilter,callback:function(t){e.$set(e.oEventInfo,"bVehicleMisFilter",t)},expression:"oEventInfo.bVehicleMisFilter"}})],1)],1)],1),t("hm-cell-group",{staticClass:"custom-cell-group",attrs:{title:e.$t("armSchedulePlan")}},[t("hm-cell",{attrs:{"is-link":"",title:e.$t("armSchedulePlan")},nativeOn:{click:function(t){return e.showArmSchedule()}}})],1),e.bShowLink?t("base-link",{ref:"link",attrs:{link:e.oEventInfo.oLink}}):e._e()],1),e.bShowSchedule?t("div",{staticClass:"full-screen-display"},[t("base-page-extend",{attrs:{title:e.$t("armSchedule"),"show-footer":!0,"enable-cancel-callback":e.bEnableCancelCallback},on:{delete:e.deleteAll,cancelcallback:e.cancelCallbackArmSchedule,confirm:e.confirmArmSchedule}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"swipe-wrapper time-plan-padding swipe-wrapper-show-footer"},[t("hm-scroll",[t("time-plan",{ref:"timePlan",attrs:{"times-data":e.oEventInfo.oScheduleTimes,holiday:e.oEventCap.bSupportHoliday,"show-types":e.bShowTypes}})],1)],1)])])],1):e._e(),e.bLandscapeMode?t("div",{staticClass:"full-screen-display"},[t("new-base-page-extend-rotate",{attrs:{title:e.$t("drawGridTip2"),"enable-cancel-callback":e.bEnableCancelCallback,"show-min-filter":e.oEventCap.bSupportSmartCalibration,"show-max-filter":e.oEventCap.bSupportSmartCalibration},on:{cancelcallback:e.cancelLandscapeMode,confirm:e.confirmLandscapeMode,drawPolygon:e.drawPolygon,addMinFilter:e.addMinFilter,addMaxFilter:e.addMaxFilter,clearPolygon:e.clearPolygon}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"plugin-small-ex"},[t("plugin-wind",{attrs:{mode:"motiondetect","o-channel":e.oChannel,hide:e.oEventInfo.bPluginHide},on:{"play-success":e.playSuccess}})],1)])])],1):e._e(),t("base-view")],1)])},a=[],o=n("9195"),r=o["a"],s=(n("9a26"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"50681b80",null);t["default"]=l.exports},b372:function(e,t,n){"use strict";n("8d68")},bbfe:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("base-page",{attrs:{title:e.$t("HDDQuota"),"right-type":"text","b-lazy-loading":e.bLazyLoading}},[t("div",{staticClass:"management",attrs:{slot:"content"},slot:"content"},[t("hm-scroll",[e.oParams.bSptQuota?t("hm-cell-group",{staticClass:"custom-cell-group",attrs:{title:" "}},[t("hm-cell",{attrs:{title:e.$t("ImgCapacity"),disabled:!0},model:{value:e.oParams.szTotalImgQuota,callback:function(t){e.$set(e.oParams,"szTotalImgQuota",t)},expression:"oParams.szTotalImgQuota"}}),t("hm-cell",{attrs:{title:e.$t("ImgFreeSpace"),disabled:!0},model:{value:e.oParams.szFreeImgQuota,callback:function(t){e.$set(e.oParams,"szFreeImgQuota",t)},expression:"oParams.szFreeImgQuota"}}),t("hm-cell",{attrs:{title:e.$t("RecordCapacity"),disabled:!0},model:{value:e.oParams.szTotalVideoQuota,callback:function(t){e.$set(e.oParams,"szTotalVideoQuota",t)},expression:"oParams.szTotalVideoQuota"}}),t("hm-cell",{attrs:{title:e.$t("RecordFreeSpace"),disabled:!0},model:{value:e.oParams.szFreeVideoQuota,callback:function(t){e.$set(e.oParams,"szFreeVideoQuota",t)},expression:"oParams.szFreeVideoQuota"}}),t("hm-cell",{attrs:{title:e.$t("capturePercent")+"(%)"}},[t("hm-input",{model:{value:e.oParams.iImgQuotaRatio,callback:function(t){e.$set(e.oParams,"iImgQuotaRatio",t)},expression:"oParams.iImgQuotaRatio"}})],1),t("hm-cell",{attrs:{title:e.$t("recordPercent")+"(%)"}},[t("hm-input",{model:{value:e.oParams.iVideoQuotaRatio,callback:function(t){e.$set(e.oParams,"iVideoQuotaRatio",t)},expression:"oParams.iVideoQuotaRatio"}})],1)],1):e._e(),e.oCapbilities.bSupportAllReconstruction?t("div",{staticClass:"hm-btn-group"},[t("hm-button",{on:{click:function(t){return e.rebuild("all")}}},[e._v(e._s(e.$t("rebuildAll")))])],1):e._e(),!e.oCapbilities.bNVR&&(e.oParams.bSptQuota||e.tableData.tableItem&&e.tableData.tableItem.length>0)?t("div",{staticClass:"hm-btn-group"},[t("hm-button",{on:{click:e.save}},[e._v(e._s(e.$t("save")))])],1):e._e()],1)],1)])},a=[],o=(n("96cf"),n("1da1")),r=n("03e7"),s=n("7de8"),l={data:function(){return{bLazyLoading:!1,indexx:0,dataa:0,verifyResult:r["a"].verifyResult,oParamsValid:r["a"].m_oParamsValid,isShowcheckbox:!0,oButtonsControl:r["a"].oButtonsControl,tableData:r["a"].m_oParams.tableData,oParams:r["a"].m_oParams,oCapbilities:r["a"].m_oCapbilities,bEnableShowTips:!1,bEnableCancelCallback:!0,bShowPortDetails:!1}},watch:{"oParams.iImgQuotaRatio":{handler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r["a"].m_oParams.bSptQuota&&(n=100-s["a"].checkNumber(t,0),r["a"].m_oParams.iVideoQuotaRatio=n);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deep:!0},"oParams.iVideoQuotaRatio":{handler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r["a"].m_oParams.bSptQuota&&(n=100-s["a"].checkNumber(t,0),r["a"].m_oParams.iImgQuotaRatio=n);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deep:!0}},created:function(){this.init()},methods:{onItemClick:function(e,t){this.bShowPortDetails=!0,this.indexx=e,this.dataa=t},init:function(){var e=this;r["a"].initParams(),r["a"].initStorageManageHarddisk().finally((function(){e.tableData=r["a"].m_oParams.tableData,e.oParams=r["a"].m_oParams,e.oCapbilities=r["a"].m_oCapbilities}))},setDiskInfo:function(){r["a"].setDiskInfo()},formatDisks:function(){r["a"].formatDisks()},save:function(){var e=this;this.bLazyLoading=!0,r["a"].save().then((function(){e.bLazyLoading=!1}))},rebuild:function(e){r["a"].rebuild(e)},cancelCallback:function(){this.bShowPortDetails=!1}}},c=l,u=(n("5563"),n("2877")),p=Object(u["a"])(c,i,a,!1,null,"9f38735e",null);t["default"]=p.exports},be2c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("base-page",{attrs:{title:e.$t("basicEvent")}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"basicEvent"},e._l(e.aMenu,(function(n,i){return t("div",{key:i,staticClass:"content top-distance"},[n.title?t("div",{staticClass:"title"},[e._v(e._s(n.title))]):e._e(),t("div",{staticClass:"menu"},[e._l(n.menu,(function(n,i){return[n.cap?t("hm-cell",{key:i,class:n.label===e.$t("update")&&e.oCaps.bHaveNewVersion?"color-red":"",attrs:{center:"",title:n.label,"is-link":"",value:n.value},nativeOn:{click:function(t){return e.goMenu(n)}}}):e._e()]}))],2)])})),0),t("router-view")],1)])],1)},a=[],o=n("1f20"),r=n("7de8"),s=n("9741"),l={name:"CommonEvent",data:function(){return{aMenu:[],selectedLabel:"",bEnableCancelCallback:!0,bEnableShowTips:!1,bShowConfirm:!1,tabLabels:[],closeWebView:!1,isbSupportWhiteLightAlarmOut:!1,isbSupportAudioAlarmOut:!1}},created:function(){this.initEvent()},methods:{goMenu:function(e){var t={};e.name?t.name=e.name:t.path=e.path,this.$router.push(t)},initEvent:function(){var e=this;r["a"].waitAll([o["a"].getDeviceCapa(),o["a"].getTriggersCap(),o["a"].getLightAlarmOutput(),o["a"].getEventCap()]).then((function(){e.aMenu.push({title:"",menu:[{path:"",name:"EventMotion",label:e.$t("motion"),value:"",cap:o["a"].m_oDeviceCapa.bSupportMotion||0===s["a"].iDeviceType},{path:"",name:"VideoLoss",label:e.$t("videoLoss"),value:"",cap:0===s["a"].iDeviceType},{path:"",name:"VideoTamper",label:e.$t("videoTamper"),value:"",cap:o["a"].m_oDeviceCapa.bSupportVideoTamper},{path:"",name:"Exception",label:e.$t("exception"),value:"",cap:o["a"].m_oDeviceCapa.aExceptionCap.length>0},{path:"",name:"EventAlarmInput",label:e.$t("alarmInput"),value:"",cap:o["a"].m_oDeviceCapa.bSupportAlarmIn},{path:"",name:"WhiteLightAlarmOut",label:e.$t("whiteLightAlarmOut"),value:"",cap:o["a"].m_oDeviceCapa.bSupportLightAlarmOut}]})}))}}},c=l,u=(n("5227"),n("2877")),p=Object(u["a"])(c,i,a,!1,null,"59fb0e87",null);t["default"]=p.exports},c793:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("base-page",{attrs:{title:e.$t("image"),"left-type":"back"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"config"},e._l(e.aMenu,(function(n,i){return t("div",{key:i,staticClass:"content top-distance"},[n.title?t("div",{staticClass:"title"},[e._v(e._s(n.title))]):e._e(),t("div",{staticClass:"menu"},[e._l(n.menu,(function(n,i){return[n.cap?t("hm-cell",{key:i,attrs:{center:"",title:n.label,"is-link":"",value:n.value},nativeOn:{click:function(t){return e.goMenu(n)}}}):e._e()]}))],2)])})),0),t("router-view")],1)])],1)},a=[],o=(n("6762"),n("2fdb"),n("96cf"),n("1da1")),r=n("d4ec"),s=n("bee2"),l=n("1f20"),c=function(){function e(){Object(r["a"])(this,e),this.iChannelId=1,this.oImageCapa={}}return Object(s["a"])(e,[{key:"getCapInfo",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getDeviceInfo();case 2:return e.next=4,l["a"].getDeviceCapa();case 4:return e.next=6,l["a"].getDisplayParamSwitchSupport();case 6:return e.next=8,l["a"].isSupportPrivacyMask();case 8:this.oImageCapa={bSupportDisplay:!1,bSupportPrivacyMask:l["a"].m_oDeviceCapa.bSupportPrivacyMask,bSupportPicOver:l["a"].m_oDeviceCapa.bSupportPicOver,bSupportRoadInfo:l["a"].m_oDeviceCapa.bSupportRoadInfo,bSupportDisplayParamSwitch:l["a"].m_oDeviceCapa.bSupportDisplayParamSwitch,bSupportTHScreen:l["a"].m_oDeviceCapa.bSupportTHScreen,bSupportLaserSpotManual:l["a"].m_oDeviceCapa.bSupportLaserSpotManual,bSupportPIP:l["a"].m_oDeviceCapa.bSupportPIP,bSupportDPC:l["a"].m_oDeviceCapa.bSupportDPC,bSupportThermalPip:l["a"].m_oDeviceCapa.bSupportThermalPip,bSupportThermalOSD:l["a"].m_oDeviceCapa.bSupportThermalOSD,bSupportBurningPrevention:l["a"].m_oDeviceCapa.bSupportBurningPrevention};case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),u=new c,p={name:"ImageCfg",data:function(){return{selectedLabel:this.$t("displaySettings"),bEnableCancelCallback:!0,bEnableShowTips:!1,bShowConfirm:!1,tabLabels:[],oImageCapa:{},aMenu:[{menu:[]}]}},created:function(){this.init()},methods:{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$store.state.globeStore.showRouter.length){e.next=5;break}this.tabLabels=[],this.$store.state.globeStore.showRouter.includes("displaySettings")&&(this.tabLabels.push(this.$t("displaySettings")),this.aMenu[0].menu.push({path:"",name:"DisplaySettings",label:this.$t("displaySettings"),value:"",cap:!0})),e.next=7;break;case 5:return e.next=7,u.getCapInfo().then((function(){t.oImageCapa=u.oImageCapa,t.aMenu[0].menu.push({path:"",name:"DisplaySettings",label:t.$t("displaySettings"),value:"",cap:!0}),t.aMenu[0].menu.push({path:"",name:"OSDSettings",label:t.$t("OSDSettings"),value:"",cap:!0}),t.oImageCapa.bSupportPrivacyMask&&t.aMenu[0].menu.push({path:"",name:"PrivacyMask",label:t.$t("privacyCover"),value:"",cap:!0})}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goMenu:function(e){var t={};e.name?t.name=e.name:t.path=e.path,this.$router.push(t)}}},d=p,h=(n("25f1"),n("2877")),f=Object(h["a"])(d,i,a,!1,null,"a256e7f0",null);t["default"]=f.exports},c977:function(e,t,n){"use strict";n("60a0")},cbd9:function(e,t,n){},d022:function(e,t,n){},dc06:function(e,t,n){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"header"},[t("div",{staticClass:"hm-picker-choose border-bottom-1px"},[t("span",{class:{"hm-picker-cancel":e.enableShowTips,"hm-ic-back icon-back_dark":!e.enableShowTips},on:{click:e.back}},[e._v(e._s(e.enableShowTips?e.$t("cancel"):""))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.showConfirm,expression:"showConfirm"}],staticClass:"hm-picker-confirm",on:{click:e.addtest}},[e._v(e._s(e.$t("ok")))]),t("span",{on:{click:e.addtest}},[t("hm-icon",{directives:[{name:"show",rawName:"v-show",value:e.showAdd,expression:"showAdd"}],staticClass:"add-info",attrs:{name:"plus"}})],1),t("div",{staticClass:"hm-picker-title-group"},[t("h1",{staticClass:"hm-picker-title"},[e._v("\n          "+e._s(e.title)+"\n        ")])])])])])},a=[],o="confirm",r="cancelcallback",s={props:{title:{type:String,default:"",required:!0},type:{type:String,default:""},desc:{type:String,default:""},content:{type:String,default:""},enableCancelCallback:{type:Boolean,default:!1},enableShowTips:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},showAdd:{type:Boolean,default:!1}},data:function(){return{bRouter:!0}},created:function(){},methods:{back:function(){this.enableCancelCallback?this.$emit(r):this.$router.back()},confirm:function(){this.$emit(o)},addtest:function(){this.$emit("add")}}},l=s,c=(n("fe48"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,"8e7ac210",null);t["a"]=u.exports},e01a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("base-page",{attrs:{title:e.$t("alarmInput"),"right-type":"text"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{staticClass:"alarmOutput"},e._l(e.aMenu,(function(n,i){return t("div",{key:i,staticClass:"content top-distance"},[n.title?t("div",{staticClass:"title"},[e._v(e._s(n.title))]):e._e(),t("div",{staticClass:"menu"},[e._l(n.menu,(function(n,i){return[n.cap?t("hm-cell",{key:i,attrs:{center:"",title:n.label,"is-link":"",value:n.value},nativeOn:{click:function(t){return e.goMenu(n)}}}):e._e()]}))],2)])})),0)])])},a=[],o=n("1205"),r=o["a"],s=(n("b372"),n("5689"),n("2877")),l=Object(s["a"])(r,i,a,!1,null,"78fa6ebf",null);t["default"]=l.exports},e130:function(e,t,n){"use strict";n("9f2e")},f220:function(e,t,n){"use strict";(function(e){n("96cf");var i=n("1da1"),a=(n("7514"),n("1f20")),o=n("dc06"),r=n("f193"),s=n("9741"),l=n("7de8");t["a"]={name:"Advanced",components:{BaseHeader:o["a"]},data:function(){return{oCommon:s["a"],selectedLabel:"Email",bEnableCancelCallback:!0,bEnableShowTips:!1,bShowConfirm:!1,tabLabels:["Email"],oAdvancedCap:{},bSupportAdvancedService:!1,bSupportHttpListen:!1}},created:function(){this.init()},methods:{changeHandler:function(e){this.selectedLabel=e,this.routerJump(e)},routerJump:function(e){switch(e){case this.$t("instantPreviews"):this.$router.push({name:"SmoothStream"});break;case"Email":this.$router.push({name:"Email"});break;case"Other":this.$router.push({name:"Other"});break;case"SNMP":this.$router.push({name:"SNMP"});break;case"FTP":this.$router.push({name:"Ftp"});break;case"QoS":this.$router.push({name:"Qos"});break;case"HTTPS":this.$router.push({name:"HTTPS"});break;case this.$t("integrationProtocol"):this.$router.push({name:"Protocol"});break;case"WAN":this.$router.push({name:"WAN"});break;case"Multicast":this.$router.push({name:"Multicast"});break;case"RTSP":this.$router.push({name:"RTSP"});break;case"SRTP":this.$router.push({name:"SRTP"});break;case this.$t("service28181"):this.$router.push({name:"Advanced28181"});break;case"Wi-Fi":this.$router.push({name:"WifiIpc"});break;case"802.1x":this.$router.push({name:"X8021"});break;case this.$t("netService"):0===s["a"].iDeviceType?this.$router.push({name:"HTTPS"}):1===s["a"].iDeviceType&&this.$router.push({name:"networkService"});break;case this.$t("httpListen"):this.$router.push({name:"httpListen"});break;case this.$t("rtmpConfig"):this.$router.push({name:"Rtmp"});break;default:this.$router.push({name:"Email"});break}},goConfigPage:function(){this.$router.push({name:"Config"})},getAdminAccesses:function(){var t=this,n=this,i=new Promise((function(i){var a={urlCGI:"portInfo",params:{},data:null,loading:!0};r["a"].get(a).then((function(a){var o=a.oResult;n.oXmlDoc=o;var r="",s=["dev_manage","websocket","websockets","sdk_over_tls","tls1_0enable","tls1_1enable","tls1_2enable"];e(o).find("AdminAccessProtocol").each((function(n,i){r=l["a"].nodeValue(e(i),"protocol").toLowerCase(),e.inArray(r,s)>-1&&e(i).find("enabled").length&&(t.bSupportAdvancedService=!0),"https"===r&&(e(i).find("TLS1_1Enable").length||e(i).find("TLS1_2Enable").length)&&e(i).find("enabled").length&&(t.bSupportAdvancedService=!0)})),i()}),(function(){t.bSupportAdvancedService=!1,i()}))}));return i},getHttpHostsCap:function(){var e=this,t=new Promise((function(t){var n={urlCGI:"httpHostsCap",params:{},data:null,loading:!0};r["a"].get(n).then((function(){e.bSupportHttpListen=!0,t()}),(function(){e.bSupportHttpListen=!1,t()}))}));return t},init:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tabLabels=["Email"],e.next=3,a["a"].getNetworkCap();case 3:return e.next=5,a["a"].getintegrateProtocolCap();case 5:return e.next=7,a["a"].getDeviceCapa();case 7:return e.next=9,a["a"].isSupportQosInfo();case 9:return e.next=11,this.getAdminAccesses();case 11:return e.next=13,this.getHttpHostsCap();case 13:a["a"].m_oDeviceCapa.bSupportFtp&&this.tabLabels.push("FTP"),a["a"].m_oDeviceCapa.bSupportSnmp&&this.tabLabels.push("SNMP"),a["a"].m_oDeviceCapa.bSupportHttps&&1===s["a"].iDeviceType&&this.tabLabels.push("HTTPS"),(a["a"].m_oDeviceCapa.bSupportProtocolConfig||a["a"].m_oDeviceCapa.bSupportGenetec)&&this.tabLabels.push(this.$t("integrationProtocol")),a["a"].m_oDeviceCapa.bSupport28181Service&&this.tabLabels.push(this.$t("service28181")),a["a"].m_oDeviceCapa.bSupportWifi&&this.tabLabels.push("Wi-Fi"),a["a"].m_oDeviceCapa.bSupport8021x&&this.tabLabels.push("802.1x"),a["a"].m_oDeviceCapa.m_bSupportRtmp&&this.tabLabels.push(this.$t("rtmpConfig")),a["a"].m_oDeviceCapa.bSupportNetworkOther&&this.tabLabels.push(this.$t("other")),a["a"].m_oDeviceCapa.bSupportPrio&&this.tabLabels.push("QoS"),this.bSupportAdvancedService&&this.tabLabels.push(this.$t("netService")),this.bSupportHttpListen&&this.tabLabels.push(this.$t("httpListen")),this.tabLabels.push("RTSP"),this.tabLabels.push("SRTP"),a["a"].m_oDeviceCapa.oNpq&&a["a"].m_oDeviceCapa.oNpq.bSupport&&-1===this.$store.state.globeStore.hideRouter.indexOf("netAdvanceConfig_smoothStream")&&this.tabLabels.push(this.$t("instantPreviews")),this.routerJump();case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}}).call(this,n("1157"))},f8d8:function(e,t,n){},fa88:function(e,t,n){},fe48:function(e,t,n){"use strict";n("1c05")}}]);